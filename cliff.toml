# Configuration for git-cliff (https://git-cliff.org)

[changelog]
header = """
# Changelog

All notable changes to this project are documented here. The file is regenerated automatically by git-cliff based on commit history and pull request titles.
"""
body = """
{% if version %}## {{ version | trim_start_matches(pat="v") }} - {{ timestamp | date(format="%Y-%m-%d") }}
{% else %}## [Unreleased]
{% endif %}
{% for group, commits in commits | group_by(attribute="group") %}
{% if commits | length %}### {{ group | default(value="Other") }}
{% for commit in commits %}- {{ commit.message | split(pat="\\n") | first }} ({{ commit.id | truncate(length=7, end="") }})
{% endfor %}
{% endif %}
{% endfor %}
"""
footer = "\n"
trim = true
render_always = true

[git]
conventional_commits = false
filter_unconventional = false
tag_pattern = "v?[0-9]+\\.[0-9]+\\.[0-9]+"
sort_commits = "oldest"
include_tags = true
filter_commits = false

commit_preprocessors = [
  { pattern = " \\(#\\d+\\)", replace = "" }
]

commit_parsers = [
  { message = "(?i)^feat", group = "Features" },
  { message = "(?i)^feature", group = "Features" },
  { message = "(?i)^add", group = "Features" },
  { message = "(?i)^introduce", group = "Features" },
  { message = "(?i)^improve", group = "Improvements" },
  { message = "(?i)^update", group = "Improvements" },
  { message = "(?i)^upgrade", group = "Improvements" },
  { message = "(?i)^refactor", group = "Refactors" },
  { message = "(?i)^cleanup", group = "Refactors" },
  { message = "(?i)^rework", group = "Refactors" },
  { message = "(?i)^fix", group = "Fixes" },
  { message = "(?i)^guard", group = "Fixes" },
  { message = "(?i)^fallback", group = "Fixes" },
  { message = "(?i)^prevent", group = "Fixes" },
  { message = "(?i)^resolve", group = "Fixes" },
  { message = "(?i)^docs?", group = "Documentation" },
  { message = "(?i)^readme", group = "Documentation" },
  { message = "(?i)^test", group = "Tests" },
  { message = "(?i)^ci", group = "CI" },
  { message = "(?i)^build", group = "Build" },
  { message = "(?i)^release", group = "Build" },
  { message = "(?i)^chore", group = "Chores" },
  { message = "(?i)^deps", group = "Dependencies" },
  { message = "(?i)^switch", group = "Changes" },
  { message = "(?i)^enable", group = "Changes" },
  { message = ".*", group = "Other" }
]

protect_breaking_commits = true
